CREATE TABLE IF NOT EXISTS `accounts`  (
  id varchar(36) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL,
  email varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NULL DEFAULT NULL,
  password text CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NULL,
  created_at timestamp NULL DEFAULT CURRENT_TIMESTAMP,
  updated_at timestamp NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  deleted_at timestamp NULL DEFAULT NULL,
  status tinyint(1) NULL DEFAULT NULL,
  refresh_token varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NULL DEFAULT NULL,
  token_expires bigint UNSIGNED NULL DEFAULT NULL,
  is_deleted varchar(50) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NULL DEFAULT NULL,
  newPassword text CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NULL,
  oldPassword text CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NULL,
  role_id int NOT NULL DEFAULT 0,
  PRIMARY KEY (id) USING BTREE,
  INDEX email(email) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8mb4 COLLATE = utf8mb4_0900_ai_ci ROW_FORMAT = Dynamic;

CREATE TABLE IF NOT EXISTS `roles` (
  id int(10) ZEROFILL NOT NULL AUTO_INCREMENT,
  name varchar(255) CHARACTER SET utf16 COLLATE utf16_general_ci NOT NULL,
  permissions text CHARACTER SET utf16 COLLATE utf16_general_ci NOT NULL,
  status TINYINT UNSIGNED DEFAULT 0,
  is_deleted TINYINT UNSIGNED DEFAULT 0,
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  deleted_at TIMESTAMP DEFAULT NULL,
  level TINYINT UNSIGNED DEFAULT 0,
  db_filters text CHARACTER SET utf16 COLLATE utf16_general_ci,
  PRIMARY KEY (id)
) ENGINE = InnoDB AUTO_INCREMENT = 1 CHARACTER SET = utf16 COLLATE = utf16_general_ci  ROW_FORMAT = Dynamic;

CREATE TABLE IF NOT EXISTS `modules`  (
  id int(10) ZEROFILL NOT NULL AUTO_INCREMENT,
  name varchar(255) CHARACTER SET utf16 COLLATE utf16_general_ci NOT NULL,
  module varchar(255) CHARACTER SET utf16 COLLATE utf16_general_ci NOT NULL,
  icon varchar(255) CHARACTER SET utf16 COLLATE utf16_general_ci NOT NULL default '',
  status TINYINT UNSIGNED DEFAULT 0,
  sort_order int UNSIGNED DEFAULT 0,
  is_function TINYINT UNSIGNED DEFAULT 0,
  is_deleted TINYINT UNSIGNED DEFAULT 0,
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  deleted_at TIMESTAMP DEFAULT NULL,
  PRIMARY KEY (id)
) ENGINE = InnoDB AUTO_INCREMENT = 1 CHARACTER SET = utf16 COLLATE = utf16_general_ci  ROW_FORMAT = Dynamic;

CREATE TABLE IF NOT EXISTS `prompts` (
  id int(10) ZEROFILL NOT NULL AUTO_INCREMENT,
  vector_id varchar(36) NOT NULL,
  prompt text CHARACTER SET utf16 COLLATE utf16_general_ci NOT NULL,
  completion text CHARACTER SET utf16 COLLATE utf16_general_ci NOT NULL,
  product_id TINYINT UNSIGNED DEFAULT 0,
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  deleted_at TIMESTAMP DEFAULT NULL,
  UNIQUE INDEX vector_id(vector_id) USING BTREE,
  PRIMARY KEY (id)
) ENGINE = InnoDB AUTO_INCREMENT = 1 CHARACTER SET = utf16 COLLATE = utf16_general_ci  ROW_FORMAT = Dynamic;

CREATE TABLE IF NOT EXISTS `applications` (
  id int(10) ZEROFILL NOT NULL AUTO_INCREMENT,
  key_name text CHARACTER SET utf16 COLLATE utf16_general_ci NOT NULL,
  key_value text CHARACTER SET utf16 COLLATE utf16_general_ci NOT NULL,
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  deleted_at TIMESTAMP DEFAULT NULL,
  PRIMARY KEY (id)
) ENGINE = InnoDB AUTO_INCREMENT = 1 CHARACTER SET = utf16 COLLATE = utf16_general_ci  ROW_FORMAT = Dynamic;

CREATE TABLE IF NOT EXISTS `categories` (
  id int(10) ZEROFILL NOT NULL AUTO_INCREMENT,
  name varchar(255) CHARACTER SET utf16 COLLATE utf16_general_ci NOT NULL,
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  deleted_at TIMESTAMP DEFAULT NULL,
  PRIMARY KEY (id)
) ENGINE = InnoDB AUTO_INCREMENT = 1 CHARACTER SET = utf16 COLLATE = utf16_general_ci ROW_FORMAT = Dynamic;


CREATE TABLE IF NOT EXISTS `products` (
  id int(10) ZEROFILL NOT NULL AUTO_INCREMENT,
  name varchar(255) CHARACTER SET utf16 COLLATE utf16_general_ci NOT NULL,
  product_group_id int(10) ZEROFILL NOT NULL,
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  deleted_at TIMESTAMP DEFAULT NULL,
  PRIMARY KEY (id)
) ENGINE = InnoDB AUTO_INCREMENT = 1 CHARACTER SET = utf16 COLLATE = utf16_general_ci ROW_FORMAT = Dynamic;


CREATE TABLE IF NOT EXISTS `product_groups` (
  id int(10) ZEROFILL NOT NULL AUTO_INCREMENT,
  category_id int(10) ZEROFILL NOT NULL,
  name varchar(255) CHARACTER SET utf16 COLLATE utf16_general_ci NOT NULL,
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  deleted_at TIMESTAMP DEFAULT NULL,
  PRIMARY KEY (id)
) ENGINE = InnoDB AUTO_INCREMENT = 1 CHARACTER SET = utf16 COLLATE = utf16_general_ci ROW_FORMAT = Dynamic;

INSERT IGNORE INTO `modules` (`id`, `name`, `module`, `icon`, `status`, `sort_order`, `is_function`, `is_deleted`, `created_at`, `updated_at`, `deleted_at`) VALUES (0000000001, 'Quản lý nội dung - Quản lý Prompts', 'prompts', '', 1, 1, 0, 0, '2023-11-10 14:57:03', '2023-11-10 15:12:34', NULL);
INSERT IGNORE INTO `modules` (`id`, `name`, `module`, `icon`, `status`, `sort_order`, `is_function`, `is_deleted`, `created_at`, `updated_at`, `deleted_at`) VALUES (0000000002, 'Quản lý hệ thống - Quản lý tài khoản', 'accounts', '', 1, 30, 0, 0, '2023-11-10 14:59:50', '2023-11-10 15:09:21', NULL);
INSERT IGNORE INTO `modules` (`id`, `name`, `module`, `icon`, `status`, `sort_order`, `is_function`, `is_deleted`, `created_at`, `updated_at`, `deleted_at`) VALUES (0000000003, 'Quản lý danh mục - Quản lý Category', 'categories', '', 1, 21, 1, 0, '2023-11-10 15:01:40', '2023-11-10 15:09:28', NULL);
INSERT IGNORE INTO `modules` (`id`, `name`, `module`, `icon`, `status`, `sort_order`, `is_function`, `is_deleted`, `created_at`, `updated_at`, `deleted_at`) VALUES (0000000004, 'Quản lý danh mục - Quản lý Nhóm sản phẩm', 'product-groups', '', 1, 22, 0, 0, '2023-11-10 15:02:53', '2023-11-10 16:15:39', NULL);
INSERT IGNORE INTO `modules` (`id`, `name`, `module`, `icon`, `status`, `sort_order`, `is_function`, `is_deleted`, `created_at`, `updated_at`, `deleted_at`) VALUES (0000000005, 'Quản lý danh mục - Quản lý Sản phẩm', 'products', '', 1, 23, 0, 0, '2023-11-10 15:03:55', '2023-11-10 15:09:39', NULL);
INSERT IGNORE INTO `modules` (`id`, `name`, `module`, `icon`, `status`, `sort_order`, `is_function`, `is_deleted`, `created_at`, `updated_at`, `deleted_at`) VALUES (0000000006, 'Quản lý hệ thống - Quản lý App keys', 'applications', '', 1, 31, 0, 0, '2023-11-14 09:51:00', '2023-11-14 09:52:01', NULL);
INSERT IGNORE INTO `modules` (`id`, `name`, `module`, `icon`, `status`, `sort_order`, `is_function`, `is_deleted`, `created_at`, `updated_at`, `deleted_at`) VALUES (0000000007, 'Quản lý hệ thống - Quản lý vai trò', 'roles', '', 1, 32, 0, 0, '2023-11-14 10:05:27', '2023-11-14 10:05:27', NULL);

INSERT IGNORE INTO `roles` (`id`, `name`, `permissions`, `status`, `is_deleted`, `created_at`, `updated_at`, `deleted_at`, `level`, `db_filters`) VALUES (0000000001, 'Admin', '{\"roles\":{\"read\":false,\"write\":false,\"create\":false,\"delete\":false},\"applications\":{\"read\":true,\"write\":true,\"create\":true,\"delete\":true},\"products\":{\"read\":true,\"write\":true,\"create\":true,\"delete\":true},\"product-groups\":{\"read\":true,\"write\":true,\"create\":true,\"delete\":true},\"categories\":{\"read\":true,\"write\":true,\"create\":true,\"delete\":true},\"accounts\":{\"read\":true,\"write\":true,\"create\":true,\"delete\":true},\"prompts\":{\"read\":true,\"write\":true,\"create\":true,\"delete\":true}}', 0, 0, '2023-11-10 14:58:21', '2023-11-14 10:06:49', NULL, 0, NULL);
INSERT IGNORE INTO `roles` (`id`, `name`, `permissions`, `status`, `is_deleted`, `created_at`, `updated_at`, `deleted_at`, `level`, `db_filters`) VALUES (0000000002, 'Level Staff', '{\"applications\":{\"read\":false,\"write\":false,\"create\":false,\"delete\":false},\"products\":{\"read\":true,\"write\":true,\"create\":true,\"delete\":false},\"product-groups\":{\"read\":true,\"write\":true,\"create\":true,\"delete\":false},\"categories\":{\"read\":true,\"write\":true,\"create\":true,\"delete\":false},\"accounts\":{\"read\":false,\"write\":false,\"create\":false,\"delete\":false},\"prompts\":{\"read\":true,\"write\":true,\"create\":true,\"delete\":false}}', 0, 0, '2023-11-10 15:16:49', '2023-11-14 09:51:29', NULL, 0, NULL);
INSERT IGNORE INTO `roles` (`id`, `name`, `permissions`, `status`, `is_deleted`, `created_at`, `updated_at`, `deleted_at`, `level`, `db_filters`) VALUES (0000000003, 'Level Manager', '{\"applications\":{\"read\":false,\"write\":false,\"create\":false,\"delete\":false},\"products\":{\"read\":true,\"write\":true,\"create\":true,\"delete\":true},\"product-groups\":{\"read\":true,\"write\":true,\"create\":true,\"delete\":true},\"categories\":{\"read\":true,\"write\":true,\"create\":true,\"delete\":true},\"accounts\":{\"read\":false,\"write\":false,\"create\":false,\"delete\":false},\"prompts\":{\"read\":true,\"write\":true,\"create\":true,\"delete\":true}}', 0, 0, '2023-11-10 15:17:17', '2023-11-14 09:51:22', NULL, 0, NULL);

INSERT IGNORE INTO `applications` (`id`, `key_name`, `key_value`, `created_at`, `updated_at`, `deleted_at`) VALUES (0000000001, 'OPENAI_KEY', 'sk-abcdefghiklmnopqabcdefghiklmnopqabcdefghiklmnopq', '2023-11-14 02:40:41', '2023-11-14 02:53:46', NULL);

INSERT IGNORE INTO `accounts` (`id`, `email`, `password`, `created_at`, `updated_at`, `deleted_at`, `status`, `refresh_token`, `token_expires`, `is_deleted`, `newPassword`, `oldPassword`, `role_id`) VALUES ('062f8c6d-0185-4e3f-bd2a-7c42e9b75081', 'admin', '$2a$12$12nVCAR8wXDOYCW5u1FAXOhYvI3arBnC302dFNMCt4GSO0UIdZ/EW', '2022-09-29 10:27:55', '2023-11-14 02:59:32', NULL, 1, 'U-YWtlkv-3E_x5MAluBGy', 1700016780916, NULL, NULL, NULL, 0);



CREATE TABLE IF NOT EXISTS histories (
  id int(10) ZEROFILL NOT NULL AUTO_INCREMENT,
  dialog_id varchar(255) CHARACTER SET utf16 COLLATE utf16_general_ci NULL DEFAULT NULL,
  user_message text CHARACTER SET utf16 COLLATE utf16_general_ci,
  assistant_message text CHARACTER SET utf16 COLLATE utf16_general_ci,
  status tinyint NOT NULL DEFAULT 1,
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  deleted_at TIMESTAMP DEFAULT NULL,
  PRIMARY KEY (id)
) ENGINE = InnoDB AUTO_INCREMENT = 1 CHARACTER SET = utf16 COLLATE = utf16_general_ci  ROW_FORMAT = Dynamic;
